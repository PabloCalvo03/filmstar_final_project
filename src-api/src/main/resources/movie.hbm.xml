<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="com.filmstar.domain.movie.Movie" table="movies">
        <composite-id name="id" class="com.filmstar.domain.movie.MovieId" access="field">
            <key-property column="id" name="value" length="36" access="field" />
        </composite-id>

        <component name="title" class="com.filmstar.domain.movie.Title" access="field">
            <property name="value" column="title" type="string" access="field" not-null="true" />
        </component>

        <component name="overview" class="com.filmstar.domain.movie.Overview" access="field">
            <property name="value" column="overview" type="string" access="field" not-null="true" />
        </component>

        <component name="year" class="com.filmstar.domain.movie.Year" access="field">
            <property name="value" column="year" type="integer" access="field" not-null="true" />
        </component>

        <component name="posterImg" class="com.filmstar.domain.movie.PosterImg" access="field">
            <property name="value" column="poster_img" type="string" access="field" not-null="true" />
        </component>
        
		<many-to-one name="director" class="com.filmstar.domain.director.Director" fetch="select" access="field" cascade="all">
            <column name="director_id" not-null="false" />
        </many-to-one>

        <list name="reviews" table="movie_reviews" cascade="all" access="field">
            <key column="movie_id"/>
            <index column="review_index"/>
            <one-to-many class="com.filmstar.domain.movie.Review"/>
        </list>

        <list name="ratings" table="movie_ratings" cascade="all" access="field">
            <key column="movie_id"/>
            <index column="rating_index"/>
            <one-to-many class="com.filmstar.domain.movie.Rating"/>
        </list>
          
        <property name="status" column="status" access="field">
		    <type name="org.hibernate.type.EnumType">
		      <param name="enumClass">com.filmstar.domain.shared.Status</param>
		      <param name="useNamed">true</param>
		    </type>       
		  </property>
    </class>
</hibernate-mapping>
